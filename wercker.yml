box: wercker/default
build:
  steps:
    - validate-wercker-step
    - install-packages:
        packages: zip
    - script:
        name: Install latest 2 versions of Hugo
        code: |
          mkdir ${WERCKER_SOURCE_DIR}/bin
          curl -sL https://github.com/spf13/hugo/releases/download/v0.16/hugo_0.16_linux-amd64.tgz -o hugo_0.16_linux-amd64.tgz
          tar xzf hugo_0.16_linux-amd64.tgz
          mv hugo_0.16_linux-amd64/hugo_0.16_linux-amd64 bin/hugo_0.16
          curl -sL https://github.com/spf13/hugo/releases/download/v0.15/hugo_0.15_linux_amd64.tar.gz -o hugo_0.15_linux_amd64.tar.gz
          tar xzf hugo_0.15_linux_amd64.tar.gz
          mv hugo_0.15_linux_amd64/hugo_0.15_linux_amd64 bin/hugo_0.15
          curl -sL https://github.com/spf13/hugo/releases/download/v0.14/hugo_0.14_linux_amd64.tar.gz -o hugo_0.14_linux_amd64.tar.gz
          tar xzf hugo_0.14_linux_amd64.tar.gz
          mv hugo_0.14_linux_amd64/hugo_0.14_linux_amd64 bin/hugo_0.14
    - script:
        name: Move the important stuff to output
        code: |
          mv README.md run.sh wercker-step.yml wercker.yml bin/ $WERCKER_OUTPUT_DIR
          ls -lh $WERCKER_OUTPUT_DIR
